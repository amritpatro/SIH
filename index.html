<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EduQuest ‚Äì Gamified STEM</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>

<body>
<!-- ‚ñë‚ñë‚ñë Language Selection ‚ñë‚ñë‚ñë -->
<div id="language-screen" class="screen active">
  <header class="header">
    <h1 class="logo">EduQuest</h1>
    <p class="subtitle">Gamified STEM Learning</p>
  </header>
  <div class="language-selection">
    <h2>Choose Your Language</h2>
    <div class="language-options">
      <button class="language-btn" data-lang="en"><span>English</span></button>
      <button class="language-btn" data-lang="hi"><span>‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</span></button>
      <button class="language-btn" data-lang="od"><span>‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</span></button>
    </div>
  </div>
</div>

<!-- ‚ñë‚ñë‚ñë Dashboard ‚ñë‚ñë‚ñë -->
<div id="dashboard-screen" class="screen">
  <header class="app-header">
    <div class="header-content">
      <button id="menu-btn" class="icon-btn">‚ò∞</button>
      <h1>EduQuest</h1>
      <button id="profile-btn" class="icon-btn">üë§</button>
    </div>
  </header>

  <main class="dashboard-content">
    <section class="progress-section">
      <div class="welcome-banner">
        <h2>Hello, <span id="username">Student</span>!</h2>
        <div class="progress-stats">
          <div class="stat"><span id="total-points">0</span><span class="stat-label">Points</span></div>
          <div class="stat"><span id="badges-count">0</span><span class="stat-label">Badges</span></div>
          <div class="stat"><span id="lessons-completed">0</span><span class="stat-label">Lessons</span></div>
        </div>
      </div>
    </section>

    <!-- STEM Lessons -->
    <section class="lessons-section">
      <h3>STEM Lessons</h3>
      <div class="lessons-grid">
        <div class="lesson-card" data-lesson="math">
          <h4>Mathematics Puzzle</h4>
          <p>Solve equations and unlock rewards</p>
          <button class="start-lesson-btn">Start</button>
        </div>
        <div class="lesson-card" data-lesson="memory">
          <h4>Memory Match</h4>
          <p>Match vocabulary words</p>
          <button class="start-lesson-btn">Start</button>
        </div>
      </div>
    </section>
  </main>
</div>

<!-- ‚ñë‚ñë‚ñë Game Screen ‚ñë‚ñë‚ñë -->
<div id="game-screen" class="screen">
  <div class="game-header">
    <button id="back-to-dashboard" class="icon-btn">‚Üê</button>
    <div class="game-stats">
      Points: <span id="game-points">0</span> |
      Time: <span id="game-timer">60</span>s
    </div>
  </div>

  <div id="game-container">
    <!-- Math game -->
    <div id="math-game-section">
      <h2 id="math-question">Question</h2>
      <div id="math-options" class="options"></div>
      <div id="math-feedback" class="feedback"></div>
    </div>

    <!-- Memory game -->
    <div id="memory-game-section" style="display:none;">
      <h3>Memory Match</h3>
      <div id="memory-grid" class="memory-grid"></div>
      <p>Moves: <span id="memory-moves">0</span> |
         Matches: <span id="memory-matches">0</span>/10</p>
    </div>
  </div>
</div>

<!-- ‚ñë‚ñë‚ñë Drawer ‚ñë‚ñë‚ñë -->
<div id="nav-drawer" class="drawer">
  <div class="drawer-content">
    <nav class="drawer-nav">
      <a href="#" class="nav-item active">Dashboard</a>
      <a href="dashboard.html" class="nav-item">Teacher View</a>
      <a href="#" class="nav-item" id="export-data">Export Progress</a>
      <a href="#" class="nav-item" id="import-data">Import Progress</a>
    </nav>
    <button id="logout-btn" class="secondary-btn">Log Out</button>
  </div>
</div>

<script src="game.js"></script>
<script>
/* -------------------------
   Multilingual + Dashboard
--------------------------*/
const languageButtons = document.querySelectorAll('.language-btn');
const languageScreen  = document.getElementById('language-screen');
const dashboardScreen = document.getElementById('dashboard-screen');
const gameScreen      = document.getElementById('game-screen');
const startLessonBtns = document.querySelectorAll('.start-lesson-btn');
const backBtn         = document.getElementById('back-to-dashboard');
const gamePointsEl    = document.getElementById('game-points');
const dashPointsEl    = document.getElementById('total-points');
const gameTimerEl     = document.getElementById('game-timer');

let userData = {language:'en',points:0,lessonsCompleted:0};
let timerInterval = null;

languageButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    userData.language = btn.dataset.lang;
    languageScreen.classList.remove('active');
    dashboardScreen.classList.add('active');
    saveData();
  });
});

startLessonBtns.forEach(btn=>{
  btn.addEventListener('click',()=>{
    const type = btn.closest('.lesson-card').dataset.lesson;
    startLesson(type);
  });
});

backBtn.addEventListener('click',()=>{
  clearInterval(timerInterval);
  gameScreen.classList.remove('active');
  dashboardScreen.classList.add('active');
  updateDashboard();
});

function startLesson(type){
  dashboardScreen.classList.remove('active');
  gameScreen.classList.add('active');
  resetGameUI();

  if(type==='math'){
    document.getElementById('math-game-section').style.display='block';
    game.startGame('math');
    startTimer();
  }else if(type==='memory'){
    document.getElementById('memory-game-section').style.display='block';
    initMemory();
  }
}

function startTimer(){
  let time=60;
  gameTimerEl.textContent=time;
  clearInterval(timerInterval);
  timerInterval=setInterval(()=>{
    time--;
    gameTimerEl.textContent=time;
    if(time<=0){ clearInterval(timerInterval); game.endGame(); }
  },1000);
}

function resetGameUI(){
  document.getElementById('math-game-section').style.display='none';
  document.getElementById('memory-game-section').style.display='none';
  document.getElementById('math-feedback').textContent='';
}

function updateDashboard(){
  dashPointsEl.textContent=userData.points;
}

function saveData(){
  localStorage.setItem('eduquest_user',JSON.stringify(userData));
}
function loadData(){
  const d=localStorage.getItem('eduquest_user');
  if(d) userData=JSON.parse(d);
  updateDashboard();
}

/* -------------------------
   Simple Memory Game Setup
--------------------------*/
function initMemory(){
  const grid=document.getElementById('memory-grid');
  grid.innerHTML='';
  const pairs=['A','B','C','D','E'];
  const deck=[...pairs,...pairs].sort(()=>Math.random()-0.5);
  let first=null,moves=0,matches=0;
  document.getElementById('memory-moves').textContent=0;
  document.getElementById('memory-matches').textContent=0;
  deck.forEach(letter=>{
    const card=document.createElement('button');
    card.textContent='?';
    card.addEventListener('click',()=>{
      if(card.classList.contains('done')||card===first) return;
      card.textContent=letter;
      if(!first){ first=card; return; }
      moves++; document.getElementById('memory-moves').textContent=moves;
      if(first.dataset.l===letter){
        card.classList.add('done'); first.classList.add('done');
        matches++; document.getElementById('memory-matches').textContent=matches;
        if(matches===pairs.length){
          userData.points+=20; saveData(); updateDashboard();
        }
        first=null;
      }else{
        setTimeout(()=>{card.textContent='?';first.textContent='?';first=null;},600);
      }
    });
    card.dataset.l=letter;
    grid.appendChild(card);
  });
}

/* -------------------------
   Init
--------------------------*/
document.addEventListener('DOMContentLoaded',()=>{
  loadData();
  if ('serviceWorker' in navigator) navigator.serviceWorker.register('service-worker.js');
});
</script>
</body>
</html>
